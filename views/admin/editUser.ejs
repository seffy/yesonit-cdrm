<!DOCTYPE html>
<html lang="en" data-theme="auto">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>YesOnIt! Content Development</title>
    <meta name="description" content="YesOnIt - Tool Content Development">
    <meta name="keywords" content="YesOnIt, YesOnIt, YesOnIt, YesOnIt, Tool Content Development, Tool Access Management">
    <meta name="author" content="JosephSabana">
    <meta property="og:image" content="img/cover.png">
    <meta property="og:title" content="YesOnIt">
    <meta property="og:description" content="YesOnIt - Tool Content Development">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined">
    <link href="/css/new-styles.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
  </head>
  <body>
         <%- include('../partials/header') %>
    <div class="main-con">

<div style="height: 150vh!important;">
 <section class="section container" >
  <!--Content-->



<div class="container-form">
    <h2 class="title">Edit User Profile and Permissions</h2>
    
    <% if (typeof error !== 'undefined' && error) { %>
      <p style="color: red;"><%= error %></p>
    <% } %>
    
    <form action="/manage-users/<%= user._id %>/edit" method="POST">

      <div class="div-content-group">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" value="<%= user.name %>" required>
      </div>
      <div class="div-content-group">
      <label for="department">Department:</label>
      <select id="department" name="department" required>
        <% departments.forEach(function(dept) { %>
          <option value="<%= dept._id %>" <%= user.department && user.department._id.toString() === dept._id.toString() ? "selected" : "" %>>
            <%= dept.name %>
          </option>
        <% }); %>
      </select>
    </div>
    <div class="div-content-group">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" value="<%= user.email %>" required readonly>
    </div>
    <div class="div-content-group">
      <label for="accessLevel">Access Level:</label>
      <select id="accessLevel" name="accessLevel" required>
        <option value="blocked" <%= user.accessLevel === "blocked" ? "selected" : "" %>>Blocked</option>
        <option value="Level 1" <%= user.accessLevel === "Level 1" ? "selected" : "" %>>Level 1</option>
        <option value="Level 2" <%= user.accessLevel === "Level 2" ? "selected" : "" %>>Level 2</option>
        <option value="Level 3" <%= user.accessLevel === "Level 3" ? "selected" : "" %>>Level 3</option>
        <option value="Level 4" <%= user.accessLevel === "Level 4" ? "selected" : "" %>>Level 4</option>
        <option value="Level 5" <%= user.accessLevel === "Level 5" ? "selected" : "" %>>Level 5</option>
      </select>
    </div>
 
      <div class="div-content-group scdiv"  >
        <button class="btn cancel" onclick="location.href='/manage-users'"><i class="material-icons-outlined">arrow_back_ios</i> Go Back</button>
        <button type="submit" class="btn submit"><i class="material-icons-outlined">save</i> Save </button>

      </div>
    </form>
    <br>

  </div>




    <!--End of Content-->
</section>

</div>

</div>


  
  <script>
    window.addEventListener('pageshow', function (event) {
      // Check if the flag is set or if the page was loaded from bfcache.
      if (sessionStorage.getItem('reloadPage') === 'true' || event.persisted) {
        // Clear the flag to avoid an infinite reload loop.
        sessionStorage.removeItem('reloadPage');
        // Reload the page.
        window.location.reload();
      }
    });
  </script>

    <script src="/js/theme.js"></script>
     <script src="/js/scripts.js"></script>
    <%- include('../partials/footer') %>
</body>
</html>
  